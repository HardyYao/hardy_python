# chapter01 Python的变量和简单数据类型

## 在本章中，你将学习：

> 如何使用变量

> 如何消除名称错误和语法错误

> 数据类型：字符串、整数和浮点数

> 使用数值数据类型时需要注意的意外行为

### 1.1 变量是什么

维基百科上对变量的定义是「在程序设计中，变量（英语：Variable，scalar）是指一个包含部分已知或未知数值或信息（即一个值）之存储地址，以及相对应之符号名称（识别字）。通常使用变量名称引用存储值；将名称和内容分开能让被使用的名称独立于所表示的精确消息之外。......」

看完这段话，你可能很想吐槽：这都什么跟什么啊？？？

你可以不必理会这些晦涩难懂的名词解释，你只需要知道，变量可以用来存储各种各样的值。不管学习哪一门编程语言，都要先掌握变量的用法，那么下面我们就来学习一下如何使用变量。

### 1.2 变量的命名和使用

在Python中使用变量时，需要遵守一些规则和指南。

* 变量名只能包含字母、数字和下划线。变量名可以字母或下划线开头，但不能以数字开头。例如，可以将变量命名为``var_1``，但不能将其命名为``1_var``。
* 变量名不能包含空格，但可以用下划线来分隔其中的单词。例如，变量名``hardy_python``是合法的，但变量名``hardy python``会引发错误。
* 不要将Python关键字和函数名用作变量名，即不要使用Python保留用于特殊用途的单词，如``print``。

下面正式来使用一下变量。

在此之前，你需要先下载安装好Python（Linux系统自带了Python环境，无需自行安装），为方便使用，建议下载一个编译器，推荐使用Pycharm（全宇宙唯一一个完全为Python量身定制的编译器）。

新建一个名为``hello_world.py``的文件，编写以下代码：

    message = "Hello world!"
    print(message);

运行这个程序，会输出以下结果：

    Hello world!

### 1.3 使用变量时应避免命名错误

下面我们将有意地编写一段会引发错误的代码：

    message = "Hello world!"
    print(mesage);

运行这个程序，编译器会报告以下错误：

	Traceback (most recent call last):
	  File "hello_world.py", line 2, in <module>
	    print(mesage);
	NameError: name 'mesage' is not defined

Python解释器指出，文件``hello_world.py``的第2行存在错误；并列出了这行代码，旨在帮助你快速找出错误；同时，它还告诉你这是一个什么样的错误：name 'mesage' is not defined，变量名'mesage'未定义，Python无法识别你提供的变量名。名称错误通常意味着两种情况：一种是使用变量前忘记给它复制，一种是输入的变量名拼写错误。

要消除以上错误，你有两种方法：一是将变量名统一修改为``mesage``，计算机不关心拼写是否错误，只关心变量名是否已定义，当然，这种做法并不值得推荐；二是将``print``语句中的``mesage``修改为``message``,这才是标准的做法。

### 1.4 数据类型：字符串

我们将介绍的第一种数据类型是字符串。

字符串就是一系列字符。在Python中，用引号括起来的都是字符串，其中的引号可以是单引号，也可以是双引号，如下所示：

    "This is a string."
    'This is also a string.'

对于字符串，最简单的用法之一就是修改其中的单词的大小写。

新建一个名为``name.py``的文件，编写以下代码：

    name = "hardy love python."
    print(name.title())

该程序运行结果如下所示：

    Hardy Love Python.

在这个示例中，小写的字符串"hardy love python."存储到了变量name中。在print()语句中，变量``name``调用了方法``title()``。``方法``（亦常被称为``函数``）是Python可对数据执行的操作。在``name.title()``中，``name``后面的句点（.）让Python对变量``name``执行方法``title()``指定的操作。

``title()``以首字母大写的方式显示每个单词，即将每个单词的首字母都改为大写。

还有其他几个很有用的大小写处理方法。例如，要讲字符串全部改为大写或小写字母，可以这样操作：

    name = "hardy love python."
    print(name.upper())
    print(name.lower())

该程序运行结果如下所示：

	HARDY LOVE PYTHON.
	hardy love python.

这两个方法都非常好用。很多时候，你可能只想要保存小写或大写的字母，但是用户提供的数据可能既包含小写字母又包含大写字母。你可以调用这两个方法，直接将字符串先转换为小写或大写，再存储它们。

#### 1.4.1 合并（拼接）字符串

在很多时候，我们都需要合并字符串。例如，你会想要把姓和名存储在不同的变量中，但是想让它们一起显示出来，举个例子：

    first_name = "hardy"
    last_name = "yao"
    full_name = first_name + " " + last_name

    print(full_name)

该程序运行结果如下所示：

    hardy yao

这种合并字符串的方法称为``拼接``。通过拼接，可使用存储在变量中的信息来创建完整的信息。

### 1.5 数据类型：数字

在编程中，常常需要使用数字来记录游戏得分、表示可视化数据、存储Web应用信息等。Python根据数字的用法以不同的方式处理它们。鉴于整数使用起来最简单，下面就先来看看Python是如何管理它们的。

#### 1.5.1 整数

在Python中，可对整数执行加（+）减（-）乘（*）除（/）运算。下面我们在终端会话中直接进行操作:

    >>> 2 + 5
	7
    >>> 5 - 2
	3
    >>> 2 * 5
	10
    >>> 5 / 2
    2.5   

Python使用两个乘号表示乘方运算：

    >>> 2 ** 2
	4
    >>> 2 ** 3
	8
    >>> 2 ** 5
	32

Python还支持运算次序，因此你可以在同一个表达式中使用多种运算。你还可以使用括号来修该运算次序，让Python按你指定的次序执行运算，如下所示：

    >>> 2 + 5*6
	32
    >>> (2 + 5) * 6
	42

#### 1.5.2 浮点数

Python将带小数点的数字都称为``浮点数``。大多数编程语言都是用了这个术语，它指出了这样一个事实：小数点可出现在数字的任何位置。每种编程语言都须细心设计，以妥善的处理浮点数，确保不管小数点出现在什么位置，数字的行为都是正常的。

从很大程度上来说，使用浮点数时都不需要考虑其行为。你只需输入要使用的数字，Python通常都会按你期望的方式处理它们：

    >>> 0.1 + 0.1
	0.2
    >>> 0.2 + 0.2
	0.4
    >>> 2 * 0.1
	0.2

但需要注意的是，结果包含的小数位数可能是不确定的：

    >>> 0.2 + 0.1
	0.30000000000000004
    >>> 3 * 0.1
	0.30000000000000004

所有语言都存在这种问题，没有什么可担心的。Python会尽力找到一种方式，以尽可能精确地表示结果，但鉴于计算机内部表示数字的方式，这在有些情况下很难做到。就现在而言，暂时忽略多余的小数位数即可，不需要深究。

#### 1.5.3 使用函数str()避免类型错误

我们经常需要在``print``语句中使用变量的值。新建一个名为``age.py``的文件，编写以下代码：

    age = 23
    message = "I'm " + age + " years old."
    print(message)

你可能觉得，上述代码会打印出一条简单的语句：``I'm 23 years old.``。但如果你运行该程序，将会引发一下错误：

    Traceback (most recent call last):
	  File "age.py", line 2, in <module>
	    message = "I'm " + age + " years old."
	TypeError: must be str, not int

这是一个``类型错误``，意味着Python无法识别你使用的信息。在这个示例中，Python发现你使用了一个值为整数（int）的变量，但它不知道该如何解读这个值。Python指导，这个变量表示的可能是数值23，也可能是字符2和3。像上面这样在字符串中使用整数时，需要显式地指出你希望Python将这个整数用作字符串。为此，可调用方法str()，它让Python将非字符串值转换为字符串：

    age = 23
    message = "I'm " + str(age) + " years old."
    print(message)

调用了方法str()，Python就知道你要将数值23转换为字符串，进而在message消息中显示字符2和3。经过上述处理后，将显示你期望的消息，而不会引发错误：

    I'm 23 years old.

### 1.6 小结

在本章中，我们学习了：如何使用变量；如何消除名称错误和语法错误；数据类型：字符串、整数和浮点数；使用数值数据类型时需要注意的意外行为。

通过本章的学习，你应该知道了如何将数据存储到变量中，以及如何在程序中使用这些变量。

### 1.7 动手试一试

**习题1-1 个性化消息：**挑选一个你喜欢的姓名，将它存储到一个变量中，并输出一条非常简单的消息，如“Hello Hardy, would you like to learn some Python today?”

**习题1-2 调整名字的大小写：**依旧挑选一个你喜欢的姓名，将它存储到一个变量中，再以小写、大写和首字母大写的方式显示这个人名。

**习题1-3 输出数字6：**编写4个表达式，它们分别使用加法、减法、乘法和除法运算，但结果都是数字6。举个例子：

    print(1 + 5)

   输出应为4行，其中每行都只包含数字6。

**习题 1-4 最喜欢的数字：**挑选一个你最喜欢的数字，将它存储到一个变量中，并创建一条简单的消息，指出你最喜欢的数字，并将这条消息打印出来。